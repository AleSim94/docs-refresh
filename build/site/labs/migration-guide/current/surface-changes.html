<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Surface changes :: Neo4j Labs Docs</title>
    <link rel="stylesheet" href="../../_/css/site.css">
  </head>
  <body class="article docs">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="/labs/docs">
        <svg width="97px" height="36px" viewBox="0 0 97 36" class="logo">
          <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
            <g transform="translate(0.000000, 1.000000)" fill-rule="nonzero">
              <g>
                <path
                  d="M28.7331787,15.4086598 C28.7331787,23.4004124 22.3016241,29.8779381 14.3665893,29.8779381 C6.43155452,29.8779381 0,23.4004124 0,15.4086598 C0,7.41690722 6.43155452,0.939375765 14.3665893,0.939375765 C22.3016241,0.932371134 28.7331787,7.41690722 28.7331787,15.4086598"
                  fill="#008CC1"></path>
                <path
                  d="M6.36890951,10.6626804 C6.36890951,11.3006186 5.85382831,11.8193814 5.22041763,11.8193814 C4.58700696,11.8193814 4.07192575,11.3006186 4.07192575,10.6626804 C4.07192575,10.0247423 4.58700696,9.50597938 5.22041763,9.50597938 C5.86078886,9.50597938 6.36890951,10.0247423 6.36890951,10.6626804"
                  fill="#FFFFFF"></path>
                <path
                  d="M6.5638051,13.8383505 C6.5638051,14.4762887 6.0487239,14.9950515 5.41531323,14.9950515 C4.78190255,14.9950515 4.26682135,14.4762887 4.26682135,13.8383505 C4.26682135,13.2004124 4.78190255,12.6816495 5.41531323,12.6816495 C6.0487239,12.6816495 6.5638051,13.1934021 6.5638051,13.8383505"
                  fill="#FFFFFF"></path>
                <path
                  d="M7.26682135,17.203299 C7.26682135,17.8412371 6.75174014,18.36 6.11832947,18.36 C5.48491879,18.36 4.96983759,17.8412371 4.96983759,17.203299 C4.96983759,16.5653608 5.48491879,16.0465979 6.11832947,16.0465979 C6.75174014,16.0395876 7.26682135,16.5583505 7.26682135,17.203299"
                  fill="#FFFFFF"></path>
                <path
                  d="M8.83990719,20.217732 C8.83990719,20.8556701 8.32482599,21.374433 7.69141531,21.374433 C7.05800464,21.374433 6.54292343,20.8556701 6.54292343,20.217732 C6.54292343,19.5797938 7.05800464,19.0610309 7.69141531,19.0610309 C8.32482599,19.0540206 8.83990719,19.5727835 8.83990719,20.217732"
                  fill="#FFFFFF"></path>
                <path
                  d="M21.1392111,24.4309278 C21.1392111,25.068866 20.6241299,25.5876289 19.9907193,25.5876289 C19.3573086,25.5876289 18.8422274,25.068866 18.8422274,24.4309278 C18.8422274,23.7929897 19.3573086,23.2742268 19.9907193,23.2742268 C20.6241299,23.2742268 21.1392111,23.7929897 21.1392111,24.4309278"
                  fill="#FFFFFF"></path>
                <path
                  d="M23.2273782,21.942268 C23.2273782,22.5802062 22.712297,23.0989691 22.0788863,23.0989691 C21.4454756,23.0989691 20.9303944,22.5802062 20.9303944,21.942268 C20.9303944,21.3043299 21.4454756,20.785567 22.0788863,20.785567 C22.712297,20.785567 23.2273782,21.3043299 23.2273782,21.942268"
                  fill="#FFFFFF"></path>
                <path
                  d="M17.1716937,4.34639175 C17.1716937,4.9843299 16.6566125,5.50309278 16.0232019,5.50309278 C15.3897912,5.50309278 14.87471,4.9843299 14.87471,4.34639175 C14.87471,3.70845361 15.3897912,3.18969072 16.0232019,3.18969072 C16.6566125,3.18969072 17.1716937,3.70845361 17.1716937,4.34639175"
                  fill="#FFFFFF"></path>
                <path
                  d="M14.1508121,3.28082474 C14.1508121,3.91876289 13.6357309,4.43752577 13.0023202,4.43752577 C12.3689095,4.43752577 11.8538283,3.91876289 11.8538283,3.28082474 C11.8538283,2.6428866 12.3689095,2.12412371 13.0023202,2.12412371 C13.6357309,2.12412371 14.1508121,2.6428866 14.1508121,3.28082474"
                  fill="#FFFFFF"></path>
                <ellipse id="Oval" stroke="#FFFFFF" fill="#66B245" cx="22.2946636" cy="11.9595876" rx="7.65661253"
                  ry="7.71134021"></ellipse>
                <ellipse id="Oval" stroke="#FFFFFF" fill="#66B245" cx="11.8051044" cy="27.6837113" rx="6.26450116"
                  ry="6.30927835"></ellipse>
                <ellipse id="Oval" stroke="#FFFFFF" fill="#66B245" cx="6.64733179" cy="4.20618557" rx="4.17633411"
                  ry="4.20618557"></ellipse>
              </g>
              <g id="neo4j" transform="translate(33.000000, 1.000000)" fill="#000000">
                <path
                  d="M0,4.87252125 L1.39130435,4.87252125 L1.39130435,7.6203966 C2.05913043,5.9490085 3.45043478,4.64589235 6.28869565,4.64589235 C9.51652174,4.64589235 11.6869565,6.85552408 11.6869565,10.3399433 L11.6869565,19.1501416 L10.2956522,19.1501416 L10.2956522,10.6232295 C10.2956522,7.76203966 8.57043478,5.97733711 5.9826087,5.97733711 C3.17217391,5.97733711 1.39130435,8.18696884 1.39130435,11.4730878 L1.39130435,19.1501416 L0,19.1501416 L0,4.87252125 Z">
                </path>
                <path
                  d="M14.1634783,12.0396601 C14.1634783,7.59206799 17.1408696,4.5325779 21.0086957,4.5325779 C24.8208696,4.5325779 27.52,7.73371105 27.52,11.6430595 C27.52,11.6430595 27.52,12.0679887 27.4921739,12.3512748 L15.5269565,12.3512748 C15.6104348,15.7790368 17.8643478,18.2152975 21.0643478,18.2152975 C23.68,18.2152975 25.4886957,17.082153 26.3234783,16.0056657 L26.3234783,17.6770538 C25.0156522,18.8668555 23.4295652,19.5467422 21.0643478,19.5467422 C17.0295652,19.5467422 14.1634783,16.5439093 14.1634783,12.1246459 L14.1634783,12.0396601 Z M26.0452174,11.0764873 C26.0173913,8.15864023 23.7913043,5.86402266 21.0086957,5.86402266 C18.0869565,5.86402266 15.693913,8.15864023 15.5826087,11.0764873 L26.0452174,11.0764873 Z">
                </path>
                <path
                  d="M37.0643478,4.50424929 C41.1826087,4.50424929 44.4382609,7.70538244 44.4382609,12.0113314 C44.4382609,16.3172805 41.1826087,19.5184136 37.0643478,19.5184136 C32.946087,19.5184136 29.6904348,16.3172805 29.6904348,12.0113314 C29.6904348,7.70538244 32.946087,4.50424929 37.0643478,4.50424929 Z M37.0643478,18.1869688 C40.4869565,18.1869688 43.0469565,15.5240793 43.0469565,12.0113314 C43.0469565,8.49858357 40.4869565,5.83569405 37.0643478,5.83569405 C33.6417391,5.83569405 31.0817391,8.49858357 31.0817391,12.0113314 C31.0817391,15.5240793 33.6417391,18.1869688 37.0643478,18.1869688 Z">
                </path>
                <polygon
                  points="51.7843478 4.87252125 53.3426087 4.87252125 47.3878261 17.7903683 56.0417391 17.7903683 56.0417391 13.1161473 57.4886957 13.1161473 57.4886957 24.6175637 56.0417391 24.6175637 56.0417391 19.1501416 45.1895652 19.1501416">
                </polygon>
                <path
                  d="M62.2469565,4.87252125 L63.6382609,4.87252125 L63.6382609,21.1331445 C63.6382609,24.3342776 61.8295652,24.9858357 60.0765217,24.9858357 C59.7426087,24.9858357 59.3808696,24.9575071 59.1582609,24.9008499 L59.1582609,23.5694051 C59.4921739,23.6260623 59.8817391,23.6543909 60.2156522,23.6543909 C61.6347826,23.6543909 62.2469565,22.9461756 62.2469565,21.1331445 L62.2469565,4.87252125 Z M61.9408696,1.04815864 C61.9408696,0.45325779 62.413913,0.0283286119 62.9426087,0.0283286119 C63.4713043,0.0283286119 63.9443478,0.45325779 63.9443478,1.04815864 C63.9443478,1.61473088 63.4713043,2.03966006 62.9426087,2.03966006 C62.413913,2.03966006 61.9408696,1.61473088 61.9408696,1.04815864 Z">
                </path>
              </g>
            </g>
          </g>
        </svg>

        <svg width="58px" height="34px" viewBox="0 0 58 34">
          <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">

            <path
              d="M7.204,20.364 C10.088,20.364 12.216,18.768 12.804,17.06 L12.804,20 L14.204,20 L14.204,0.484 L12.804,0.484 L12.804,8.828 C12.216,7.12 10.088,5.524 7.204,5.524 C3.256,5.524 0.092,8.688 0.092,12.944 C0.092,17.2 3.228,20.364 7.204,20.364 Z M7.204,19.048 C3.956,19.048 1.492,16.416 1.492,12.944 C1.492,9.5 3.956,6.84 7.204,6.84 C10.48,6.84 12.972,9.388 12.972,12.944 C12.972,16.5 10.48,19.048 7.204,19.048 Z M23.416,20.364 C27.56,20.364 30.836,17.2 30.836,12.944 C30.836,8.688 27.56,5.524 23.416,5.524 C19.272,5.524 15.996,8.688 15.996,12.944 C15.996,17.2 19.272,20.364 23.416,20.364 Z M23.416,19.048 C19.972,19.048 17.396,16.416 17.396,12.944 C17.396,9.472 19.972,6.84 23.416,6.84 C26.86,6.84 29.436,9.472 29.436,12.944 C29.436,16.416 26.86,19.048 23.416,19.048 Z M40.412,20.364 C42.54,20.364 44.416,19.58 45.76,18.152 L44.92,17.2 C43.8,18.376 42.204,19.048 40.412,19.048 C36.968,19.048 34.392,16.416 34.392,12.944 C34.392,9.472 36.968,6.84 40.412,6.84 C42.204,6.84 43.8,7.512 44.92,8.688 L45.76,7.736 C44.416,6.308 42.54,5.524 40.412,5.524 C36.268,5.524 32.992,8.688 32.992,12.944 C32.992,17.2 36.268,20.364 40.412,20.364 Z M52.424,20.308 C55.588,20.308 57.156,18.46 57.156,16.416 C57.156,14.12 55.7,13.084 53.012,11.992 C51.08,11.208 49.792,10.564 49.792,8.996 C49.792,7.68 50.884,6.84 52.312,6.84 C53.572,6.84 54.384,7.372 54.916,8.324 L56.064,7.736 C55.308,6.28 54.02,5.524 52.284,5.524 C50.044,5.524 48.392,6.952 48.392,8.996 C48.392,11.264 49.96,12.16 52.144,13.084 C54.468,14.064 55.756,14.68 55.756,16.416 C55.756,17.676 54.888,18.992 52.424,18.992 C50.212,18.992 48.896,17.9 48.364,16.444 L47.188,16.892 C47.86,19.076 49.848,20.308 52.424,20.308 Z"
              id="docs" fill="#606060" fill-rule="nonzero" id="docs"></path>
          </g>
        </svg>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">

        <div class="navbar-item is-hoverable developer">
          <a class="navbar-link" href="/developer">Developer Guides</a>
        </div>
        <div class="navbar-item has-dropdown is-hoverable docs">
          <a class="navbar-link" href="/docs">Docs</a>
          <div class="navbar-dropdown">
            <div class="navbar-item project" href="">
              <a class="project-name" href="">Operations Manual</a>

              <ul class="project-links">
                <li><a href="" class="project-link">Migration Guide</a></li>
                <li><a href="" class="project-link">Status Codes</a></li>
              </ul>
            </div>
            <div class="navbar-item project" href="">
              <a class="project-name" href="">Cypher Manual</a>

              <ul class="project-links">
                <li><a href="" class="project-link">Cyper Refcard</a></li>
              </ul>
            </div>
            <div class="navbar-item project" href="">
              <a class="project-name" href="">Driver Manual</a>

              <ul class="project-links">
                <li><a href="" class="project-link">Java</a></li>
                <li><a href="" class="project-link">JavaScript</a></li>
                <li><a href="" class="project-link">.NET</a></li>
                <li><a href="" class="project-link">Python</a></li>
              </ul>
            </div>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable labs">
          <a class="navbar-link" href="/labs">Labs</a>
          <div class="navbar-dropdown">
            <div class="navbar-item project">
              <a class="project-name" href="/labs/apoc">APOC</a>
              <p class="project-description">A library of procedures and functions for interacting with Neo4j</p>

              <ul class="project-links">
                <li><a href="/labs/apoc/4.0" class="project-link">Documentation</a></li>
                <li><a href="/labs/apoc/" class="project-link">Developer Guide</a></li>
              </ul>
            </div>
            <div class="navbar-item project">
              <a class="project-name" href="/labs/streams">Neo4j Streams</a>
              <p class="project-description">Integration for Neo4j &amp; Kafka</p>

              <ul class="project-links">
                <li><a href="/labs/streams/4.0" class="project-link">Documentation</a></li>
                <li><a href="/labs/streams" class="project-link">Developer Guide</a></li>
              </ul>
            </div>
            <div class="navbar-item project">
              <a class="project-name" href="/labs/neosemantics">neosemantics</a>
              <p class="project-description">An RDF Toolkit for Neo4j</p>

              <ul class="project-links">
                <li><a href="/labs/neosemantics/4.0" class="project-link">Documentation</a></li>
                <li><a href="/labs/neosemantics" class="project-link">Developer Guide</a></li>
              </ul>
            </div>
          </div>
        </div>
        <div class="navbar-item">
          <a class="navbar-link" href="/search" id="search_open"><svg width="23px" height="23px" viewBox="0 0 23 23" version="1.1" xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink" class="fill-current float-right" id="search" role="button"
              title="Search Website">
              <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round"
                stroke-linejoin="round">
                <g transform="translate(-2.000000, -2.000000)" stroke="#a0aec0" stroke-width="1.5">
                  <circle id="Oval"
                    transform="translate(11.389364, 11.388564) rotate(-23.025000) translate(-11.389364, -11.388564) "
                    cx="11.3893642" cy="11.3885639" r="8.056"></circle>
                  <path d="M17.0853333,17.0844444 L23.3333333,23.3333333" id="Shape"></path>
                </g>
              </g>
            </svg><span class="navbar-mobile">Search</span></a>
        </div>
      </div>
    </div>
  </nav>
</header><div class="search" id="search">
    <div class="search-container">
        <form class="search-form">
            <label for="search_input">Search Neo4j.com</label>

            <input id="search_input" type="text" name="search"
                placeholder="Try &quot;MATCH clause&quot; or &quot;Monitoring Queries&quot;">
            <div class="search-icon">
                <svg width="16px" height="22px" viewBox="0 0 23 23" version="1.1" xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink" class="fill-current float-right" id="submit_search"
                    role="button" title="Search Website">
                    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round"
                        stroke-linejoin="round">
                        <g transform="translate(-2.000000, -2.000000)" stroke="#a0aec0" stroke-width="1.5">
                            <circle id="Oval"
                                transform="translate(11.389364, 11.388564) rotate(-23.025000) translate(-11.389364, -11.388564) "
                                cx="11.3893642" cy="11.3885639" r="8.056"></circle>
                            <path d="M17.0853333,17.0844444 L23.3333333,23.3333333" id="Shape"></path>
                        </g>
                    </g>
                </svg>
            </div>
            <div class="search-icon">
                <svg width="14px" height="22px" viewBox="0 0 22 22" role="button" class="cancel" id="close_search">
                    <line x1="19.5833333" y1="0.416666667" x2="0.416666667" y2="19.5833333"></line>
                    <line x1="19.5833333" y1="19.5833333" x2="0.416666667" y2="0.416666667"></line>
                </svg>
            </div>
        </form>
        <div class="search-results"></div>

        <div class="search-filters hidden">
            <div class="search-filters-header">
                <h2>Filter By Category</h2>
                <div class="search-filters-icon">
                    <svg width="14px" height="22px" viewBox="0 0 22 22" role="button" class="cancel" id="close_filters">
                        <line x1="19.5833333" y1="0.416666667" x2="0.416666667" y2="19.5833333"></line>
                        <line x1="19.5833333" y1="19.5833333" x2="0.416666667" y2="0.416666667"></line>
                    </svg>
                </div>
            </div>

            <div class="search-filters-content">
            </div>
        </div>

    </div>
</div><div class="body">
<div class="nav-container" data-component="migration-guide" data-version="current">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Migration Guide</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="index.html">Neo4j 4.0 Migration Guide</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="important-information/index.html">Important information</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="important-information/supported-upgrade-paths.html">Supported upgrade paths</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="important-information/limitations.html">Limitations</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="prepare.html">Prepare to upgrade</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="surface-changes.html">Surface changes</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="upgrade-single-instance.html">Upgrade a single instance</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="upgrade-cluster.html">Upgrade a Causal Cluster</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="upgrade-driver.html">Upgrade Neo4j drivers</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <span class="nav-text nav-item-toggle">Appendix</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="appendix-api-removed-classes.html">Classes removed from public API</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="appendix-external-dependencies.html">External dependencies</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Migration Guide</a></li>
    <li><a href="surface-changes.html">Surface changes</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">current</button>
  <div class="version-menu">
    <a class="version is-current" href="surface-changes.html">current</a>
    <a class="version is-missing" href="../4.0/index.html">4.0</a>
  </div>
</div>
  <div class="edit-this-page"><a href="file:///Users/adam/neo4j/neo4j-manual-modeling-antora/migrationGuide/modules/ROOT/pages/surface-changes.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<article class="doc">
<h1 class="page">Surface changes</h1>
<div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
<div class="paragraph">
<p>This chapter describes breaking changes to the Neo4j surface when migrating from Neo4j version 3.5 to Neo4j version 4.0.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>This chapter describes the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#surface-changes-security">Security</a></p>
</li>
<li>
<p><a href="#surface-changes-configurations-settings">Changes to configuration settings</a></p>
</li>
<li>
<p><a href="#surface-changes-rest-api-deprecation">REST API</a></p>
</li>
<li>
<p><a href="#surface-changes-cypher-cyntax">Cypher syntax</a></p>
</li>
<li>
<p><a href="#surface-changes-procedures">Procedures</a></p>
</li>
<li>
<p><a href="#surface-changes-auth">Authentication and authorization</a></p>
</li>
<li>
<p><a href="#surface-changes-logs">Logs</a></p>
</li>
<li>
<p><a href="#surface-changes-metrics">Metrics</a></p>
</li>
<li>
<p><a href="#surface-changes-cluster-discovery">Cluster discovery</a></p>
</li>
<li>
<p><a href="#surface-changes-rest-endpoints">REST endpoints</a></p>
</li>
<li>
<p><a href="#surface-changes-jmx">JMX</a></p>
</li>
<li>
<p><a href="#surface-changes-index-migration">Index migration</a></p>
</li>
<li>
<p><a href="#surface-changes-tools">Tools</a></p>
</li>
<li>
<p><a href="#surface-changes-backups">Backups</a></p>
</li>
<li>
<p><a href="#surface-changes-embedded-layout">Embedded layout</a></p>
</li>
<li>
<p><a href="#surface-changes-api">Core Java API</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="surface-changes-security"><a class="anchor" href="#surface-changes-security"></a>1. Security</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In 3.x it was possible to blacklist properties using the configuration settings <code>dbms.security.property_level.enabled</code> and <code>dbms.security.property_level.blacklist</code>.
These configuration settings have been discontinued and the blacklisting functionality must be replaced by the Cypher <code>DENY</code> command.
Note that the <code>DENY</code> command must be applied while Neo4j is running.
For details, see <a href="#cypher-manual.adoc#administration-security-subgraph" class="page unresolved">Cypher Manual &#8594; Security &#8594; Graph and sub-graph access control</a>.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Neo4j will fail to start if any of the old blacklist configuration settings are present in <em>neo4j.conf</em>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="surface-changes-configurations-settings"><a class="anchor" href="#surface-changes-configurations-settings"></a>2. Changes to configuration settings</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Previous name</th>
<th class="tableblock halign-left valign-top">Change</th>
<th class="tableblock halign-left valign-top">New name (if applicable)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dbms.active_database</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renamed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#operations-manual.adoc#config_dbms.default_database" class="page unresolved">dbms.default_database</a></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dbms.connectors.default_listen_address</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renamed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#operations-manual.adoc#config_dbms.default_listen_address" class="page unresolved">dbms.default_listen_address</a></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dbms.connectors.default_advertised_address</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renamed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#operations-manual.adoc#config_dbms.default_advertised_address" class="page unresolved">dbms.default_advertised_address</a></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dbms.ssl.policy.*.allow_key_generation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This setting is removed.
  Neo4j will no longer automatically generate a self-signed certificate.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dbms.backup.address</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renamed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#operations-manual.adoc#config_dbms.backup.listen_address" class="page unresolved">dbms.backup.listen_address</a></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dbms.logs.query.enabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is no longer a boolean setting.
  Valid values are: <code>OFF</code>, <code>INFO</code> or <code>VERBOSE</code>.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>causal_clustering.cluster_routing_ttl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renamed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#operations-manual.adoc#config_dbms.routing_ttl" class="page unresolved">dbms.routing_ttl</a></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>causal_clustering.middleware_logging.level</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This setting has been renamed, and valid values are: <code>DEBUG</code>,<code>INFO</code>, <code>WARN</code>, <code>ERROR</code> or <code>NONE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#operations-manual.adoc#config_causal_clustering.middleware.logging.level" class="page unresolved">causal_clustering.middleware.logging.level</a></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>causal_clustering.disable_middleware_logging</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This setting is removed.
  Set <code>causal_clustering.middleware.logging.level=OFF</code> to disable middleware logging.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>metrics.neo4j.logrotation.enabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renamed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#operations-manual.adoc#config_metrics.neo4j.logs.enabled" class="page unresolved">metrics.neo4j.logs.enabled</a></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#operations-manual.adoc#config_metrics.enabled" class="page unresolved">metrics.enabled</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This setting no longer changes the default values of the individual metrics.
  Instead it turns off the whole metrics module.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dbms.security.auth_provider</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This setting is replaced by two new settings.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="#operations-manual.adoc#config_dbms.security.authentication_providers" class="page unresolved">dbms.security.authentication_providers</a></code> and <code><a href="#operations-manual.adoc#config_dbms.security.authorization_providers" class="page unresolved">dbms.security.authorization_providers</a></code></p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The configuration for SSL encryption is reworked.
See <a href="#operations-manual.adoc#ssl-framework" class="page unresolved">Operations Manual &#8594; SSL framework</a>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="surface-changes-rest-api-deprecation"><a class="anchor" href="#surface-changes-rest-api-deprecation"></a>3. Removal of REST API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The REST API has been removed in Neo4j 4.0.
Cypher and procedures should be used instead, either via the HTTP API, or via Bolt using the official drivers.</p>
</div>
<div class="paragraph">
<p>The following HTTP endpoints were deprecated in Neo4j 3.4 and have now been removed:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">HTTP endpoints</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/db/data/branch</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/db/data/cypher</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/db/data/index/node</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/db/data/index/relationship</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/db/data/labels</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/db/data/node</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/db/data/relationship</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/db/data/relationship/types</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/db/data/schema/constraint</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/db/data/schema/index</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/db/data/schema/relationship/constraint</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="surface-changes-cypher-cyntax"><a class="anchor" href="#surface-changes-cypher-cyntax"></a>4. Cypher syntax</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>All changes in the Cypher language syntax are detailed in <a href="#cypher-manual.adoc#cypher-deprecations-additions-removals" class="page unresolved">Cypher Manual &#8594; Removals, deprecations, additions and extensions</a>.
Please review it thoroughly and make necessary changes in your code.</p>
</li>
<li>
<p>We would like to draw some extra attention to the fact that the parameter syntax <code>{parameter}</code> is completely removed and has been replaced by the syntax <code>$parameter</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="surface-changes-procedures"><a class="anchor" href="#surface-changes-procedures"></a>5. Procedures</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following procedures have been refactored:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Old procedure</th>
<th class="tableblock halign-left valign-top">New procedure</th>
<th class="tableblock halign-left valign-top">Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>db.awaitIndex (indexId :: INTEGER?, timeOutSeconds = 300 :: INTEGER?) :: VOID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>db.awaitIndex (indexName :: STRING?, timeOutSeconds = 300 :: INTEGER?) :: VOID</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Indexes are now uniquely identified by name, instead of ID.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dbms.cluster.overview() :: (id :: STRING?, addresses :: LIST? OF STRING?, role :: STRING?, groups :: LIST? OF STRING?, database :: STRING?)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dbms.cluster.overview() :: (id :: STRING?, addresses :: LIST? OF STRING?, databases :: MAP?, groups :: LIST? OF STRING?)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Shows roles for all databases.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dbms.cluster.role() :: (role :: STRING?)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dbms.cluster.role (database :: STRING?) :: (role :: STRING?)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Takes <code>database</code> name as parameter.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dbms.cluster.routing.getRoutingTable(context :: MAP?) :: (ttl :: INTEGER?, servers :: LIST? OF MAP?)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dbms.cluster.routing.getRoutingTable (context :: MAP?, database = null :: STRING?) :: (ttl :: INTEGER?, servers :: LIST? OF MAP?)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Takes <code>database</code> name as parameter.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>db.createIndex (index :: STRING?, providerName :: STRING?) :: (index :: STRING?, providerName :: STRING?, status :: STRING?)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>db.createIndex (indexName :: STRING?, labels :: LIST? OF STRING?, properties :: LIST? OF STRING?, providerName :: STRING?, config = {} :: MAP?) :: (name :: STRING?, labels :: LIST? OF STRING?, properties :: LIST? OF STRING?, providerName :: STRING?, status :: STRING?)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Used to take the index pattern <code>":Label(prop)"</code> as an argument, and now takes <code>labels</code> and <code>properties</code> as separate lists.
Those are also yielded as result.</p>
</div>
<div class="paragraph">
<p>Now needs to be given an <code>indexName</code>.</p>
</div>
<div class="paragraph">
<p>Can now take index settings as a map.
This is optional.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>db.createUniquePropertyConstraint (index :: STRING?, providerName :: STRING?) :: (index :: STRING?, providerName :: STRING?, status :: STRING?)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>db.createUniquePropertyConstraint (constraintName :: STRING?, labels :: LIST? OF STRING?, properties :: LIST? OF STRING?, providerName :: STRING?, config = {} :: MAP?) :: (name :: STRING?, labels :: LIST? OF STRING?, properties :: LIST? OF STRING?, providerName :: STRING?, status :: STRING?)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Used to take the index pattern <code>":Label(prop)"</code> as an argument, and now takes <code>labels</code> and <code>properties</code> as separate lists.
Those are also yielded as result.</p>
</div>
<div class="paragraph">
<p>Now needs to be given a <code>constraintName</code>.</p>
</div>
<div class="paragraph">
<p>Can now take index settings as a map.
This is optional.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>db.createNodeKey (index :: STRING?, providerName :: STRING?) :: (index :: STRING?, providerName :: STRING?, status :: STRING?)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>db.createNodeKey (constraintName :: STRING?, labels :: LIST? OF STRING?, properties :: LIST? OF STRING?, providerName :: STRING?, config = {} :: MAP?) :: (name :: STRING?, labels :: LIST? OF STRING?, properties :: LIST? OF STRING?, providerName :: STRING?, status :: STRING?)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Used to take the index pattern <code>":Label(prop)"</code> as an argument, and now takes <code>labels</code> and <code>properties</code> as separate lists.
Those are also yielded as result.</p>
</div>
<div class="paragraph">
<p>Now need to be given a <code>constraintName</code>.</p>
</div>
<div class="paragraph">
<p>Can now take index settings as a map.
This is optional.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>db.indexes() :: (description :: STRING?, indexName :: STRING?, tokenNames :: LIST? OF STRING?, properties :: LIST? OF STRING?, state :: STRING?, type :: STRING?, progress :: FLOAT?, provider :: MAP?, id :: INTEGER?, failureMessage :: STRING?)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>db.indexes() :: (id :: INTEGER?, name :: STRING?, state :: STRING?, populationPercent :: FLOAT?, uniqueness :: STRING?, type :: STRING?, entityType :: STRING?, labelsOrTypes :: LIST? OF STRING?, properties :: LIST? OF STRING?, provider :: STRING?)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Rename <code>indexName</code> to <code>name</code>.</p>
</div>
<div class="paragraph">
<p>Rename <code>tokenNames</code> to <code>labelsOrTypes</code>.</p>
</div>
<div class="paragraph">
<p>Rename <code>progress</code> to <code>populationPercent</code>.</p>
</div>
<div class="paragraph">
<p>Field <code>type</code> used to describe entity type (node or relationship), uniqueness, and index type.
This splits up into <code>type</code>, <code>uniqueness</code>, and <code>entityType</code>.</p>
</div>
<div class="paragraph">
<p>Field <code>provider</code> is now a string instead of a map.</p>
</div>
<div class="paragraph">
<p>Removed <code>description</code> in favor of <code>db.schemaStatements</code>.</p>
</div>
<div class="paragraph">
<p>Moved <code>failureMessage</code> to procedure <code>db.indexDetails</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>db.resampleIndex (index :: STRING?) :: VOID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>db.resampleIndex (indexName :: STRING?) :: VOID</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Indexes are now uniquely identified by name, instead of index pattern <code>":Label(prop)"</code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The following are new procedures:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">New procedure</th>
<th class="tableblock halign-left valign-top">Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>db.indexDetails (indexName :: STRING?) :: (id :: INTEGER?, name :: STRING?, state :: STRING?, populationPercent :: FLOAT?, uniqueness :: STRING?, type :: STRING?, entityType :: STRING?, labelsOrTypes :: LIST? OF STRING?, properties :: LIST? OF STRING?, provider :: STRING?, indexConfig :: MAP?, failureMessage :: STRING?)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>For the specified index all information included by <code>db.indexes</code> together with <code>indexConfig</code> and <code>failureMessage</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>db.schemaStatements () :: (name :: STRING?, type :: STRING?, createStatement :: STRING?, dropStatement :: STRING?)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Get all create and drop statements needed to exactly replicate the schema rules (indexes and constraints) for this database.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="surface-changes-auth"><a class="anchor" href="#surface-changes-auth"></a>6. Authentication and authorization</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_deprecated_and_removed_security_procedures"><a class="anchor" href="#_deprecated_and_removed_security_procedures"></a>6.1. Deprecated and removed security procedures</h3>
<div class="paragraph">
<p>In 3.x, authentication and authorization was managed via the built-in <code>dbms.security</code> procedures.
In 4.x, these procedures still exist but are deprecated.
If you still want to use them, they must now be run in a session towards the <code>system</code> database, and cannot be followed by <code>YIELD</code>.
There are two options for rewriting your code and routines for managing authentication and authorization.
The first of these is recommended:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Rewrite the procedures to the corresponding Cypher administration commands, using the <a href="#convert-security-procedures-table">the conversion guide below</a>.</p>
</li>
<li>
<p>Run the procedures in a session towards the <code>system</code> database and replace any <code>YIELD</code> parts by post-processing on the application side.</p>
</li>
</ol>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
The procedure <code>dbms.security.changePassword(password, requirePasswordChange)</code> has been entirely removed since the corresponding Cypher administration command also requires the old password, and thus is more secure.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following table is a conversion guide between the security procedures and the Cypher administration commands.
For more info about the administration commands, see <a href="#cypher-manual.adoc#administration-security-users-and-roles" class="page unresolved">Cypher Manual &#8594; User and role management</a>.</p>
</div>
<table id="convert-security-procedures-table" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Procedure</th>
<th class="tableblock halign-left valign-top">Administration command</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dbms.security.createUser</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CREATE USER</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dbms.security.deleteUser</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DROP USER</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dbms.security.changePassword</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ALTER CURRENT USER SET PASSWORD</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dbms.security.listUsers</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SHOW USERS</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dbms.security.changeUserPassword</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ALTER USER</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dbms.security.suspendUser</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ALTER USER</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dbms.security.activateUser</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ALTER USER</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dbms.security.addRoleToUser</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>GRANT ROLE TO USER</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dbms.security.removeRoleFromUser</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>REVOKE ROLE FROM USER</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dbms.security.listRoles</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SHOW ROLES</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dbms.security.listRolesForUser</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SHOW USERS</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dbms.security.listUsersForRole</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SHOW ROLES WITH USERS</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dbms.security.createRole</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CREATE ROLE</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dbms.security.deleteRole</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DROP ROLE</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_removal_of_flat_files_for_authentication_and_authorization"><a class="anchor" href="#_removal_of_flat_files_for_authentication_and_authorization"></a>6.2. Removal of flat files for authentication and authorization</h3>
<div class="paragraph">
<p>In 3.x, authentication and authorization were managed in flat files.
Users in the <em>auth</em> file and roles and role assignments in the <em>roles</em> file will be automatically migrated to the <code>system</code> database when upgrading from Neo4j 3.5 to Neo4j 4.0.</p>
</div>
<div class="paragraph">
<p>The Neo4j admin commands <code>set-initial-password</code> and <code>set-default-admin</code> continue to work in 4.0 and write to the same files as in 3.x.
Any content in these files will be considered on the first start of Neo4j after upgrading from 3.5.
You can run these commands before upgrading the Neo4j installation, or after, as long as they are run before completing the upgrade of the database files which is done at first start of the new installation.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The command <code>set-initial-password</code> will only be applied if the default user <code>neo4j</code> with the default password is the only user present, while <code>set-default-admin</code> will only be applied when no roles are present.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The use of <em>auth</em> and <em>role</em> files in Neo4j 3.x meant that multiple databases could have different user and role configurations.
In addition, a single database configured in a cluster could have different <em>auth</em> and <em>role</em> settings on each instance of the cluster.
Neo4j 4.0 allows multiple databases to run within a single instance, or in a cluster.
If you are bringing multiple databases together from multiple Neo4j 3.5 installations, or if you are upgrading a cluster with multiple instances, you need to manually merge the <em>auth</em> and <em>role</em> files before the upgrade.</p>
</div>
<div class="paragraph">
<p>It is still possible to have different security configurations per database after the upgrade, but this needs to be managed through the granting of privileges and roles specific to databases after the upgrade.
The built-in roles from 3.5 still exist, but will apply to all databases after the upgrade, unless explicitly modified using the new security administration commands.
The ability to manage database specific roles and privileges is described in more detail in <a href="#cypher-manual.adoc#administration" class="page unresolved">Cypher Manual &#8594; Administration</a>.</p>
</div>
<div class="paragraph">
<p>It is no longer possible to have different security privileges on different instances of a cluster.
The entire cluster shares the privileges configured in the <code>system</code> database using Cypher administration commands.
In practice this means that users have the same privileges regardless of which server in a cluster they access.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="surface-changes-logs"><a class="anchor" href="#surface-changes-logs"></a>7. Logs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Relevant logs produced by Neo4j will now have a prefix which indicates the database to which the log line pertains.
Such log lines will have the database name printed prior to the regular text.
For example, <code>[neo4j]</code> or <code>[system]</code>.</p>
</div>
<div class="exampleblock">
<div class="title">Example 1. Some log lines for the system database</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>2019-12-02 22:27:41.820+0000 INFO [o.n.k.d.Database] [system] No check point found in transaction log
2019-12-02 22:27:41.820+0000 INFO [o.n.k.d.Database] [system] Recovery required from position LogPosition{logVersion=0, byteOffset=64}
2019-12-02 22:27:41.820+0000 INFO [o.n.k.r.Recovery] [system]   10% completed
2019-12-02 22:27:41.820+0000 INFO [o.n.k.r.Recovery] [system]   20% completed
2019-12-02 22:27:41.820+0000 INFO [o.n.k.r.Recovery] [system]   30% completed
...</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Other log lines might relate to the DBMS as a whole, or be logged by a component that lives on a higher level but still operates on a particular database.
For example:</p>
</div>
<div class="exampleblock">
<div class="title">Example 2. Some log lines from the Core database manager starting the Neo4j database.</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>2019-12-02 22:27:41.964+0000 INFO [c.n.c.c.CoreDatabaseManager] Creating 'neo4j' database.
2019-12-02 22:27:41.967+0000 INFO [c.n.c.c.CoreDatabaseManager] Starting 'neo4j' database.
...</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1 enterprise-edition">
<h2 id="surface-changes-metrics"><a class="anchor" href="#surface-changes-metrics"></a>8. Metrics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In 4.0.4, there are two types of metrics: global metrics and database-local metrics.
The metric naming is different in 4.0.4 compared to 3.x.
For details about available metrics and the new naming patterns, please refer to <a href="#operations-manual.adoc#metrics" class="page unresolved">Operations Manual &#8594; Metrics</a>.</p>
</div>
</div>
</div>
<div class="sect1 enterprise-edition">
<h2 id="surface-changes-cluster-discovery"><a class="anchor" href="#surface-changes-cluster-discovery"></a>9. Cluster discovery</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Cluster discovery is now implemented on top of Akka, instead of Hazelcast, and a few minor changes have been made as part of this transition:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>discovery_advertised_address</code> hostname and port must exactly match those configured for the discovery of other members.</p>
<div class="paragraph">
<p>When <code>discovery_type=LIST</code> is used, this means that it is the list of addresses in <code>initial_discovery_members</code> which must match the respective advertised addresses of each server.</p>
</div>
<div class="paragraph">
<p>When using any other discovery types (DNS, SRV, K8S), then it is the configuration in the external service which must match.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Please note that by default your <code>discovery_advertised_address</code> is a combination of the default port assigned to that config, and the hostname assigned to <code>default_advertised_address</code>.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Connections are now opened from Cores to Read Replicas, in addition to vice versa, so therefore the advertised discovery port must be <strong>open</strong> on Read Replicas.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1 enterprise-edition">
<h2 id="surface-changes-rest-endpoints"><a class="anchor" href="#surface-changes-rest-endpoints"></a>10. Cluster REST endpoints</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The REST endpoints have moved and now exist per database:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Old endpoint</th>
<th class="tableblock halign-left valign-top">New endpoint</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/db/manage/server/causalclustering/writable</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/db/&lt;databasename&gt;/cluster/writable</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/db/manage/server/causalclustering/read-only</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/db/&lt;databasename&gt;/cluster/read-only</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/db/manage/server/causalclustering/available</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/db/&lt;databasename&gt;/cluster/available</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/db/manage/server/causalclustering/status</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/db/&lt;databasename&gt;/cluster/status</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1 enterprise-edition">
<h2 id="surface-changes-jmx"><a class="anchor" href="#surface-changes-jmx"></a>11. JMX</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In 3.x, Neo4j exposed several JMX beans in order to provide some monitoring information in addition to the metrics exposed by Neo4j.
In some instances, the provided data was incomplete or incorrect, and in some cases different beans even provided conflicting information.
All of the previous JMX endpoints have been removed and are replaced by a new set of beans that expose exactly the same information as the corresponding Neo4j metrics.</p>
</div>
<div class="paragraph">
<p>JMX beans are available only in Enterprise Edition.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="surface-changes-index-migration"><a class="anchor" href="#surface-changes-index-migration"></a>12. Index migration</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Indexes are automatically upgraded to the most recent index provider during migration.</p>
<div class="paragraph">
<p>Depending on what index providers were used previously, the migration of indexes may change the distribution of memory utilization.
In a database with many indexes, a significant amount of memory may have been reserved for Lucene.
After the migration, it could be necessary to allocate some of that memory to the page cache instead.
For a detailed description on how memory is allocated and used, refer to <a href="#operations-manual.adoc#memory-configuration" class="page unresolved">Operations Manual &#8594; Memory configuration</a>.
Use <a href="#operations-manual.adoc#neo4j-admin-memrec" class="page unresolved"><code>neo4j-admin memrec --database</code></a> to inspect the database before and after migration.</p>
</div>
<div class="paragraph">
<p>Changes have been made to how large a key can be in a b-tree index.
These changes are only relevant for indexes that use index provider <code>lucene-1.0</code> or <code>lucene+native-1.0</code> in 3.5, and hold large strings or large arrays.
For a detailed description of this change, please refer to <a href="#operations-manual.adoc#index-configuration-btree-migration" class="page unresolved">Operations Manual &#8594; Index migration</a>.</p>
</div>
</li>
<li>
<p>Support for explicit indexes has been removed and the functionality has been replaced by full-text indexes.
For details, see <a href="#cypher-manual.adoc#administration-indexes-fulltext-search" class="page unresolved">Cypher Manual &#8594; Indexes to support full-text search</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="surface-changes-tools"><a class="anchor" href="#surface-changes-tools"></a>13. Tools</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Database specific commands provided by <code>neo4j-admin</code> now support <code>--database</code>, which can be used to specify a database for a specified operation.</p>
</div>
<div class="paragraph">
<p>In cases when the <code>--database</code> option is not specified, <code>neo4j</code> will be used as the default database.</p>
</div>
</div>
</div>
<div class="sect1 enterprise-edition">
<h2 id="surface-changes-backups"><a class="anchor" href="#surface-changes-backups"></a>14. Backups</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Backups must now be taken of all databases.</p>
</div>
<div class="paragraph">
<p>A default installation has two databases, named <code>system</code> and <code>neo4j</code> respectively.
Use the <code>--database</code> option of the <code>neo4j-admin backup</code> command to specify the database to backup.
For more information, see <a href="#operations-manual.adoc#backup-performing" class="page unresolved">Operations Manual &#8594; Perform a backup</a>.</p>
</div>
<div class="paragraph">
<p>The <code>--name</code> parameter has been removed.
It was previously used to specify the last part of the path when using <code>--backup-dir</code>.
The last part of the path is now inferred from the <code>--database</code> parameter, which is used to specify the database name on the server.
You are therefore no longer able to specify the last part of the path.</p>
</div>
<div class="paragraph">
<p>If you previously used <code>--name</code> for customizing the backup path, for example by including a timestamp, then an alternative is to now use <code>--backup-dir</code> instead.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="surface-changes-embedded-layout"><a class="anchor" href="#surface-changes-embedded-layout"></a>15. Embedded layout</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To support multiple databases in embedded, the store files, transaction files and log files no longer reside in the base directory.
Instead, files are separated per database in separate directories.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="surface-changes-api"><a class="anchor" href="#surface-changes-api"></a>16. Core Java API</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_jdk_11"><a class="anchor" href="#_jdk_11"></a>16.1. JDK 11</h3>
<div class="paragraph">
<p>Neo4j 4.0 is the first major release that requires JDK 11.
Custom extensions and procedures can also be compiled now for JDK 11 (for example <code>-target 11</code>.
It is generally recommended to use the latest available JDK 11 in order to access available fixes and leverage performance improvements.</p>
</div>
</div>
<div class="sect2">
<h3 id="_classes_removed_or_excluded_from_the_public_api"><a class="anchor" href="#_classes_removed_or_excluded_from_the_public_api"></a>16.2. Classes removed or excluded from the public API</h3>
<div class="paragraph">
<p>Please refer to <a href="#appendix-api-removed-classes">[appendix-api-removed-classes]</a> for a complete list of classes removed or excluded from the public API.</p>
</div>
</div>
<div class="sect2">
<h3 id="_renamed_classes"><a class="anchor" href="#_renamed_classes"></a>16.3. Renamed classes</h3>
<div class="paragraph">
<p>The following classes have been renamed:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Old class name</th>
<th class="tableblock halign-left valign-top">New class name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.neo4j.graphdb.factory.GraphDatabaseSettings.BoltConnector</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.neo4j.configuration.connectors.BoltConnector</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.neo4j.graphdb.factory.GraphDatabaseSettings.BoltConnector.EncryptionLevel</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.neo4j.configuration.connectors.BoltConnector.EncryptionLevel</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.neo4j.kernel.configuration.HttpConnector</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.neo4j.configuration.connectors.HttpConnector</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.neo4j.graphdb.factory.GraphDatabaseSettings</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.neo4j.configuration.GraphDatabaseSettings</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.neo4j.graphdb.factory.GraphDatabaseSettings.SchemaIndex</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.neo4j.configuration.GraphDatabaseSettings.SchemaIndex</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.neo4j.backup.OnlineBackup</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>com.neo4j.backup.OnlineBackup</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.neo4j.helpers.SocketAddress</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.neo4j.configuration.helpers.SocketAddress</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.neo4j.graphdb.event.TransactionEventHandler</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.neo4j.graphdb.event.TransactionEventListener</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.neo4j.graphdb.factory.GraphDatabaseSettings.TransactionStateMemoryAllocation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.neo4j.configuration.GraphDatabaseSettings.TransactionStateMemoryAllocation</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.neo4j.graphdb.index.fulltext.AnalyzerProvider</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.neo4j.graphdb.schema.AnalyzerProvider</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_changes_to_the_api"><a class="anchor" href="#_changes_to_the_api"></a>16.4. Changes to the API</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">org.neo4j.graphdb.schema</dt>
<dd>
<p>Neo4j 4.0 comes with significant changes in schema and indexes.
Most of the related classes have additional possibilities.
Changes include:</p>
<div class="ulist">
<ul>
<li>
<p>Starting with 4.0, all of the indexes are named.
The name of an index can be retrieved using <code>getName()</code> call on  <code>IndexDefinition</code> and <code>ConstraintDefinition</code>.</p>
</li>
<li>
<p>The definition of an index can be looked up by name using <code>Schema</code>.</p>
</li>
<li>
<p>Single label and relationship type accessors <code>getLabel()</code> and <code>getRelationshipType()</code> have been removed from <code>IndexDefinition</code>.</p>
<div class="paragraph">
<p>Affected classes:</p>
</div>
</li>
<li>
<p><code>org.neo4j.graphdb.schema.ConstraintCreator</code></p>
</li>
<li>
<p><code>org.neo4j.graphdb.schema.ConstraintDefinition</code></p>
</li>
<li>
<p><code>org.neo4j.graphdb.schema.IndexCreator</code></p>
</li>
<li>
<p><code>org.neo4j.graphdb.schema.IndexDefinition</code></p>
</li>
<li>
<p><code>org.neo4j.graphdb.schema.Schema</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">org.neo4j.graphdb.event</dt>
<dd>
<p>Transaction event listeners have an updated behavior.
Changes include:</p>
<div class="ulist">
<ul>
<li>
<p>As part of the callback, you will always receive the owning <code>GraphDatabaseService</code> as one of the parameters.</p>
</li>
<li>
<p>The <code>beforeCommit</code> listener method has access to an ongoing transaction over the <code>transaction</code> call parameter.</p>
</li>
<li>
<p><code>DatabaseEventListener</code> is a new type of listener that has been introduced.
  Since Neo4j now supports multiple databases you might want to be able to listen to database events from several databases.
It can be registered and de-registered in <code>DatabaseManagementService</code>.</p>
<div class="paragraph">
<p>Affected classes:</p>
</div>
</li>
<li>
<p><code>org.neo4j.graphdb.event.TransactionEventListener</code></p>
</li>
<li>
<p><code>org.neo4j.graphdb.event.DatabaseEventContext</code></p>
</li>
<li>
<p><code>org.neo4j.graphdb.event.DatabaseEventListener</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">org.neo4j.helpers</dt>
<dd>
<p>Most of the helpers are no longer part of the public API.
The <code>SocketAddress</code> helper has minor API changes.</p>
<div class="paragraph">
<p>Affected classes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>org.neo4j.configuration.helpers.SocketAddress</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">com.neo4j.backup</dt>
<dd>
<p>The backup facade has been simplified and adapted to a multi-database environment.</p>
<div class="paragraph">
<p>Affected classes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>com.neo4j.backup.OnlineBackup</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">org.neo4j.configuration</dt>
<dd>
<p>Configuration API has been updated to be typed.
It is no longer safe to assume that the configuration is a set of random key-value pairs.
All pairs unknown to Neo4j will be rejected.
Additionally, some settings have been renamed as well.
Please check settings names migration in the corresponding migration manual section.</p>
<div class="paragraph">
<p>Affected classes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>org.neo4j.configuration.GraphDatabaseSettings</code></p>
</li>
<li>
<p><code>org.neo4j.graphdb.config.Setting</code></p>
</li>
<li>
<p><code>org.neo4j.configuration.connectors.BoltConnector</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">org.neo4j.graphdb.Transaction</dt>
<dd>
<p>Transaction API changes are one of the biggest API updates that are part of 4.0.
All of the methods that should be executed in transaction have been moved from <code>GraphDatabaseService</code> to <code>Transaction</code>.
This means that if you need to create entities, or access them, you should now be able to find all of the methods in <code>Transaction</code>.
Additionally, starting with 4.0, transactions are no longer thread-bound.
This means that any call to <code>GraphDatabaseService::beginTx()</code> will create a new independent transaction, even if it called from one thread.</p>
<div class="paragraph">
<p>Affected classes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>org.neo4j.graphdb.Transaction</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">org.neo4j.graphdb.Entity</dt>
<dd>
<p>As part of 4.0, the <code>PropertyContainer</code> interface is removed, and all property-related methods moved to <code>Entity</code>.
Access to entities should always be transactional.
This also means that an entity can only be safely accessed from a transaction where it was created or retrieved.</p>
<div class="paragraph">
<p>Affected classes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>org.neo4j.graphdb.Entity</code></p>
</li>
<li>
<p><code>org.neo4j.graphdb.Node</code></p>
</li>
<li>
<p><code>org.neo4j.graphdb.Relationship</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">org.neo4j.graphdb.GraphDatabaseService</dt>
<dd>
<p>As part of 4.0, all methods that require transactions are moved to <code>Transaction</code>.
In addition, a set of <code>executeTransactionally</code> methods have been added to provide a convenient way of query executions in a separate transaction.</p>
<div class="paragraph">
<p>Affected classes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>org.neo4j.graphdb.GraphDatabaseService</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">org.neo4j.harness and com.neo4j.harness</dt>
<dd>
<p>Support has been added for official testing support classes.
Starting with 4.0, Neo4j provides a set of Junit 4 rules and Junit 5 extensions for community and enterprise users.</p>
<div class="paragraph">
<p>Affected classes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>com.neo4j.harness.junit.extension.EnterpriseNeo4jExtension</code></p>
</li>
<li>
<p><code>com.neo4j.harness.junit.rule.EnterpriseNeo4jRule</code></p>
</li>
<li>
<p><code>org.neo4j.harness.junit.extension.Neo4j</code></p>
</li>
<li>
<p><code>org.neo4j.harness.junit.extension.Neo4jExtension</code></p>
</li>
<li>
<p><code>org.neo4j.harness.junit.extension.Neo4jExtensionBuilder</code></p>
</li>
<li>
<p><code>org.neo4j.harness.junit.rule.Neo4jRule</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">org.neo4j.dbms.api</dt>
<dd>
<p>The top-level Neo4j API has been updated.
The main access point that should be used to access individual databases, or perform any database management operations, is called <code>DatabaseManagementService</code>.
It can be constructed by the Community or Enterprise version of <code>DatabaseManagementServiceBuilder</code>.</p>
<div class="exampleblock">
<div class="title">Example 3. Using <code>DatabaseManagementService</code></div>
<div class="content">
<div class="paragraph">
<p>In this example, we are constructing a new <code>managementService</code> and a lookup <code>GraphDatabaseService</code> for the database named <code>neo4j</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">var managementService = new DatabaseManagementServiceBuilder( homeDirectory ).build();
var databaseService = managementService.database( "neo4j" );</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Affected classes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>org.neo4j.dbms.api.DatabaseManagementService</code></p>
</li>
<li>
<p><code>org.neo4j.dbms.api.DatabaseManagementServiceBuilder</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<div class="feedback">
    <div class="header question">
        <p><strong>Was this page helpful?</strong></p>

        <svg width="22px" height="22px" viewBox="0 0 22 22" role="button" class="no">
            <path
                d="M6.25,15.8333333 C6.25,13.7622655 7.92893219,12.0833333 10,12.0833333 C12.0710678,12.0833333 13.75,13.7622655 13.75,15.8333333"
                id="Shape"></path>
            <circle id="Oval" cx="10" cy="10" r="9.58333333"></circle>
            <path
                d="M12.5,4.58333333 C12.8934466,4.05873783 13.5109223,3.75 14.1666667,3.75 C14.822411,3.75 15.4398867,4.05873783 15.8333333,4.58333333"
                id="Shape"></path>
            <line x1="4.58333333" y1="7.91666667" x2="7.08333333" y2="7.91666667" id="Shape"></line>
            <path
                d="M7.08333333,8.54166667 C6.96827401,8.54166667 6.875,8.44839266 6.875,8.33333333 C6.875,8.21827401 6.96827401,8.125 7.08333333,8.125 C7.19839266,8.125 7.29166667,8.21827401 7.29166667,8.33333333 C7.29166667,8.44839266 7.19839266,8.54166667 7.08333333,8.54166667"
                id="Shape"></path>
            <line x1="12.9166667" y1="7.91666667" x2="15.4166667" y2="7.91666667" id="Shape"></line>
            <path
                d="M15.4166667,8.54166667 C15.3016073,8.54166667 15.2083333,8.44839266 15.2083333,8.33333333 C15.2083333,8.21827401 15.3016073,8.125 15.4166667,8.125 C15.531726,8.125 15.625,8.21827401 15.625,8.33333333 C15.625,8.44839266 15.531726,8.54166667 15.4166667,8.54166667"
                id="Shape"></path>
            <path
                d="M4.16666667,4.58333333 C4.5601133,4.05873783 5.17758895,3.75 5.83333333,3.75 C6.48907772,3.75 7.10655337,4.05873783 7.5,4.58333333"
                id="Shape"></path>
        </svg>

        <svg width="22px" height="22px" viewBox="0 0 22 22" role="button" class="yes">
            <circle id="Oval" cx="10" cy="10" r="9.58333333"></circle>
            <path
                d="M5.41666667,8.125 C5.53172599,8.125 5.625,8.21827401 5.625,8.33333333 C5.625,8.44839266 5.53172599,8.54166667 5.41666667,8.54166667 C5.30160734,8.54166667 5.20833333,8.44839266 5.20833333,8.33333333 C5.20833333,8.21827401 5.30160734,8.125 5.41666667,8.125"
                id="Shape"></path>
            <path
                d="M14.5833333,8.125 C14.468274,8.125 14.375,8.21827401 14.375,8.33333333 C14.375,8.44839266 14.468274,8.54166667 14.5833333,8.54166667 C14.6983927,8.54166667 14.7916667,8.44839266 14.7916667,8.33333333 C14.7916667,8.21827401 14.6983927,8.125 14.5833333,8.125"
                id="Shape"></path>
            <path
                d="M13.2275,12.9166657 C13.4853075,12.9162808 13.7287776,13.035241 13.8869095,13.2388563 C14.0450415,13.4424715 14.1000278,13.7078123 14.0358333,13.9575 C13.562901,15.7999679 11.9021969,17.0882321 10,17.0882321 C8.09780311,17.0882321 6.43709903,15.7999679 5.96416667,13.9575 C5.89997223,13.7078123 5.95495852,13.4424715 6.11309045,13.2388563 C6.27122239,13.035241 6.51469246,12.9162808 6.7725,12.9166657 L13.2275,12.9166657 Z"
                id="Shape"></path>
        </svg>
    </div>


</div>  </div>
</main>
</div>
<footer class="footer">
  <div class="column">
    <div class="logo-footer"></div>
    <p>© <span id="footer-copyright-year">2020</span> Neo4j, Inc.<br>
      <a href="/terms/">Terms</a> | <a href="/privacy-policy/">Privacy </a> | <a href="/sitemap/">Sitemap</a></p>
    <p>Neo4j<sup>®</sup>, Neo Technology<sup>®</sup>, Cypher<sup>®</sup>, Neo4j<sup>®</sup> Bloom<sup>™</sup> and
      Neo4j<sup>®</sup> Aura<sup>™</sup> are registered trademarks
      of Neo4j, Inc. All other marks are owned by their respective companies.</p>
  </div>

  <div class="column">
    <a href="/contact-us?ref=footer">Contact Us →</a>
    <p>US: 1-855-636-4532<br>
      Sweden +46 171 480 113<br>
      UK: +44 20 3868 3223<br>
      France: +33 (0) 8 05 08 03 44<br>
      <!--Germany: +49 (0)89 26204 6300</p>-->
    </p>
  </div>
</footer><script src="https://d3js.org/d3-dispatch.v1.min.js"></script>
<script src="https://d3js.org/d3-quadtree.v1.min.js"></script>
<script src="https://d3js.org/d3-timer.v1.min.js"></script>
<script src="https://d3js.org/d3-force.v2.min.js"></script>

<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/gram.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script async src="../../_/js/vendor/search.js"></script>  </body>
</html>
